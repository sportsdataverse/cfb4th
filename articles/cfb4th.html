<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="cfb4th">
<title>Get Started with cfb4th • cfb4th</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Get Started with cfb4th">
<meta property="og:description" content="cfb4th">
<meta property="og:image" content="https://github.com/sportsdataverse/cfbfastR-data/blob/main/themes/social_card_cfb4th.png?raw=true">
<meta property="og:image:alt" content="cfb4th social preview card">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@JaredDLee">
<meta name="twitter:site" content="@cfbfastR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="cfb4th.sportsdataverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">cfb4th</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/cfb4th.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fas fa fas fa-newspaper"></span>
     
     Changelog
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="http://gameonpaper.com/cfb">
    <span class="fas fa fas fa-football-ball"></span>
     
     GP
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--sdv">
    <span class="fas fa fas fa-project-diagram"></span>
     
     SDV
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--sdv">
    <a class="external-link dropdown-item" href="https://sportsdataverse.org/">SportsDataverse</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>R Packages</h6>
    <a class="external-link dropdown-item" href="https://r.sportsdataverse.org/">sportsdataverse-R</a>
    <a class="external-link dropdown-item" href="https://cfbfastR.sportsdataverse.org/">cfbfastR</a>
    <a class="external-link dropdown-item" href="https://hoopR.sportsdataverse.org/">hoopR</a>
    <a class="external-link dropdown-item" href="https://wehoop.sportsdataverse.org/">wehoop</a>
    <a class="external-link dropdown-item" href="https://fastRhockey.sportsdataverse.org/">fastRhockey</a>
    <a class="external-link dropdown-item" href="https://hockeyr.netlify.app/">hockeyR</a>
    <a class="external-link dropdown-item" href="https://abhiamishra.github.io/ggshakeR/">ggshakeR</a>
    <a class="external-link dropdown-item" href="https://BillPetti.github.io/baseballr/">baseballr</a>
    <a class="external-link dropdown-item" href="https://jaseziv.github.io/worldfootballR/">worldfootballR</a>
    <a class="external-link dropdown-item" href="https://usfootballR.sportsdataverse.org/">usfootballR</a>
    <a class="external-link dropdown-item" href="https://github.com/Dato-Futbol/soccerAnimate/">soccerAnimate</a>
    <a class="external-link dropdown-item" href="https://jaseziv.github.io/chessR/">chessR</a>
    <a class="external-link dropdown-item" href="https://oddsapiR.sportsdataverse.org/">oddsapiR</a>
    <a class="external-link dropdown-item" href="https://sportyR.sportsdataverse.org/">sportyR</a>
    <a class="external-link dropdown-item" href="https://torvik.dev/">toRvik</a>
    <a class="external-link dropdown-item" href="https://cfbplotR.sportsdataverse.org/">cfbplotR</a>
    <a class="external-link dropdown-item" href="https://camdenk.github.io/mlbplotR/">mlbplotR</a>
    <a class="external-link dropdown-item" href="https://github.com/sportsdataverse/softballR/">softballR</a>
    <a class="dropdown-item" href="https://cfb4th.sportsdataverse.org/">cfb4th</a>
    <a class="external-link dropdown-item" href="https://github.com/nwslR/nwslR/">nwslR</a>
    <a class="external-link dropdown-item" href="https://jacklich10.github.io/gamezoneR/">gamezoneR</a>
    <a class="external-link dropdown-item" href="https://recruitr.sportsdataverse.org/">recruitR</a>
    <a class="external-link dropdown-item" href="https://puntalytics.github.io/puntr/">puntr</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Python Packages</h6>
    <a class="external-link dropdown-item" href="https://py.sportsdataverse.org/">sportsdataverse-py</a>
    <a class="external-link dropdown-item" href="https://sportypy.sportsdataverse.org/">sportypy</a>
    <a class="external-link dropdown-item" href="https://github.com/nwslR/nwslpy/">nwslpy</a>
    <a class="external-link dropdown-item" href="https://github.com/sportsdataverse/recruitR-py/">recruitR-py</a>
    <a class="external-link dropdown-item" href="https://github.com/nathanblumenfeld/collegebaseball/">collegebaseball</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Node.js Packages</h6>
    <a class="external-link dropdown-item" href="https://js.sportsdataverse.org/">sportsdataverse.js</a>
    <a class="external-link dropdown-item" href="https://github.com/nntrn/nfl-nerd/">nfl-nerd</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--data">
    <span class="fas fa fas fa-database"></span>
     
     Data
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--data">
    <a class="external-link dropdown-item" href="https://collegefootballdata.com">CFBData.com</a>
    <a class="external-link dropdown-item" href="https://github.com/sportsdataverse/cfbfastR-data">Data Repository</a>
    <a class="external-link dropdown-item" href="https://github.com/sportsdataverse/cfbfastR-raw">Raw Data Repository</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="http://twitter.com/aisports_4th">
    <span class="fab fa fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sportsdataverse/cfb4th/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Get Started with cfb4th</h1>
                        <h4 data-toc-skip class="author">Ben Baldwin
&amp; Jared Lee</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sportsdataverse/cfb4th/blob/HEAD/vignettes/cfb4th.Rmd" class="external-link"><code>vignettes/cfb4th.Rmd</code></a></small>
      <div class="d-none name"><code>cfb4th.Rmd</code></div>
    </div>

    
    
<p>First load the packages and some data. <code><a href="../reference/load_4th_pbp.html">load_4th_pbp()</a></code>
loads <code>cfbfastR</code> data and computes 4th down probabilities
(depending on your computer, this may take up to a minute or two per
season).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cfb4th.sportsdataverse.org/">cfb4th</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com/" class="external-link">gt</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="easy-mode-using-cfbfastr-data">Easy mode: using cfbfastR data<a class="anchor" aria-label="anchor" href="#easy-mode-using-cfbfastr-data"></a>
</h2>
<p>Here’s what the data obtained using <code><a href="../reference/load_4th_pbp.html">load_4th_pbp()</a></code> looks
like:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">cfb4th</span><span class="fu">::</span><span class="fu"><a href="../reference/load_4th_pbp.html">load_4th_pbp</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">week</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">1</span><span class="op">:</span><span class="fl">14</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">go_boost</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">pos_team</span>, <span class="va">distance</span>, <span class="va">yards_to_goal</span>, <span class="va">go_boost</span>, <span class="va">first_down_prob</span>, </span>
<span>    <span class="va">wp_fail</span>, <span class="va">wp_succeed</span>, <span class="va">go_wp</span>, <span class="va">fg_make_prob</span>, <span class="va">miss_fg_wp</span>, <span class="va">make_fg_wp</span>, </span>
<span>    <span class="va">fg_wp</span>, <span class="va">punt_wp</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>Or we can add some filters to look up a certain game:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">week</span> <span class="op">==</span> <span class="fl">12</span>, <span class="va">pos_team</span> <span class="op">==</span> <span class="st">"Utah"</span>, <span class="va">down</span> <span class="op">==</span> <span class="fl">4</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">pos_team</span>, <span class="va">distance</span>, <span class="va">yards_to_goal</span>, <span class="va">go_boost</span>, <span class="va">first_down_prob</span>, </span>
<span>    <span class="va">wp_fail</span>, <span class="va">wp_succeed</span>, <span class="va">go_wp</span>, <span class="va">fg_make_prob</span>, <span class="va">miss_fg_wp</span>, <span class="va">make_fg_wp</span>, </span>
<span>    <span class="va">fg_wp</span>, <span class="va">punt_wp</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="calculations-from-user-input">Calculations from user input<a class="anchor" aria-label="anchor" href="#calculations-from-user-input"></a>
</h2>
<p>The below shows the bare minimum amount of information that has to be
fed to <code>cfb4th</code> in order to compute 4th down decision
recommendations. The main function on user-input data is
<code><a href="../reference/add_4th_probs.html">add_4th_probs()</a></code>.</p>
<p>Teams are included to help the model easily track the
simulations.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">one_play</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>      <span class="co"># Game Info</span></span>
<span>      home <span class="op">=</span> <span class="st">"Utah"</span>,</span>
<span>      away <span class="op">=</span> <span class="st">"BYU"</span>,</span>
<span>      pos_team <span class="op">=</span> <span class="st">"Utah"</span>,</span>
<span>      def_pos_team <span class="op">=</span> <span class="st">"BYU"</span>,</span>
<span>      spread <span class="op">=</span> <span class="op">-</span><span class="fl">7</span>,</span>
<span>      over_under <span class="op">=</span> <span class="fl">55</span>,</span>
<span></span>
<span>      <span class="co"># Situation Info</span></span>
<span>      half <span class="op">=</span> <span class="fl">2</span>,</span>
<span>      period <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Quarter</span></span>
<span>      TimeSecsRem <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Half Seconds Remaining</span></span>
<span>      adj_TimeSecsRem <span class="op">=</span> <span class="fl">900</span>, <span class="co"># Game Seconds Remaining</span></span>
<span>      down <span class="op">=</span> <span class="fl">4</span>,</span>
<span>      distance <span class="op">=</span> <span class="fl">4</span>,</span>
<span>      yards_to_goal <span class="op">=</span> <span class="fl">40</span>,</span>
<span>      pos_score_diff_start <span class="op">=</span> <span class="fl">7</span>,</span>
<span></span>
<span>      pos_team_receives_2H_kickoff <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      pos_team_timeouts_rem_before <span class="op">=</span> <span class="fl">3</span>,</span>
<span>      def_pos_team_timeouts_rem_before <span class="op">=</span> <span class="fl">3</span></span>
<span></span>
<span>    <span class="op">)</span></span>
<span><span class="va">one_play</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">cfb4th</span><span class="fu">::</span><span class="fu"><a href="../reference/add_4th_probs.html">add_4th_probs</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">pos_team</span>, <span class="va">distance</span>, <span class="va">yards_to_goal</span>, <span class="va">go_boost</span>, <span class="va">first_down_prob</span>, </span>
<span>    <span class="va">wp_fail</span>, <span class="va">wp_succeed</span>, <span class="va">go_wp</span>, <span class="va">fg_make_prob</span>, <span class="va">miss_fg_wp</span>, <span class="va">make_fg_wp</span>, </span>
<span>    <span class="va">fg_wp</span>, <span class="va">punt_wp</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Computing probabilities for 1 plays. . .</span></span>
<span><span class="co">#&gt; [02:14:50] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [02:14:50] WARNING: src/learner.cc:1203: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [02:14:50] WARNING: src/learner.cc:888: Found JSON model saved before XGBoost 1.6, please save the model using current version again. The support for old JSON model will be discontinued in XGBoost 2.3.</span></span>
<span><span class="co">#&gt; [02:14:50] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="10%">
<col width="6%">
<col width="12%">
<col width="6%">
<col width="8%">
<col width="4%">
<col width="9%">
<col width="8%">
<col width="8%">
<col width="4%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">pos_team</th>
<th align="right">distance</th>
<th align="right">yards_to_goal</th>
<th align="right">go_boost</th>
<th align="right">first_down_prob</th>
<th align="right">wp_fail</th>
<th align="right">wp_succeed</th>
<th align="right">go_wp</th>
<th align="right">fg_make_prob</th>
<th align="right">miss_fg_wp</th>
<th align="right">make_fg_wp</th>
<th align="right">fg_wp</th>
<th align="right">punt_wp</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Utah</td>
<td align="right">4</td>
<td align="right">40</td>
<td align="right">1.4</td>
<td align="right">0.49</td>
<td align="right">0.81</td>
<td align="right">0.92</td>
<td align="right">0.87</td>
<td align="right">0.3</td>
<td align="right">0.81</td>
<td align="right">0.91</td>
<td align="right">0.84</td>
<td align="right">0.85</td>
</tr></tbody>
</table>
</div>
<div class="section level2">
<h2 id="make-a-summary-table">Make a summary table<a class="anchor" aria-label="anchor" href="#make-a-summary-table"></a>
</h2>
<p>Let’s put the play above into a table using the provided function
<code><a href="../reference/make_table_data.html">make_table_data()</a></code>, which makes it easier to interpret the
recommendations for a play. This function only works with one play at a
time since it makes a table using the results from the play.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">one_play</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">cfb4th</span><span class="fu">::</span><span class="fu"><a href="../reference/add_4th_probs.html">add_4th_probs</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">cfb4th</span><span class="fu">::</span><span class="fu"><a href="../reference/make_table_data.html">make_table_data</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Computing probabilities for 1 plays. . .</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">choice</th>
<th align="right">choice_prob</th>
<th align="right">success_prob</th>
<th align="right">fail_wp</th>
<th align="right">success_wp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Go for it</td>
<td align="right">86.5</td>
<td align="right">49.4</td>
<td align="right">81.2</td>
<td align="right">92.0</td>
</tr>
<tr class="even">
<td align="left">Punt</td>
<td align="right">85.1</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">Field goal attempt</td>
<td align="right">84.0</td>
<td align="right">30.4</td>
<td align="right">80.7</td>
<td align="right">91.3</td>
</tr>
</tbody>
</table>
<p>Looking at the table, the offense would be expected to have 86.5% win
probability if they had gone for it and 85% if they punted.</p>
</div>
<div class="section level2">
<h2 id="getting-4th-down-plays-from-a-live-game">Getting 4th down plays from a live game<a class="anchor" aria-label="anchor" href="#getting-4th-down-plays-from-a-live-game"></a>
</h2>
<p><code>cfbfastR</code> isn’t available for live games and typing all
the plays in by hand is annoying. So how does the 4th down bot work?
With thanks to the ESPN API, which can be accessed using
<code><a href="../reference/get_4th_plays.html">get_4th_plays()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">game</span> <span class="op">&lt;-</span> <span class="fu">cfbfastR</span><span class="fu">::</span><span class="fu"><a href="https://cfbfastR.sportsdataverse.org/reference/cfbd_game_info.html" class="external-link">cfbd_game_info</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2019</span>, team <span class="op">=</span> <span class="st">"Utah"</span>, week <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">plays</span> <span class="op">&lt;-</span> <span class="fu">cfb4th</span><span class="fu">::</span><span class="fu"><a href="../reference/get_4th_plays.html">get_4th_plays</a></span><span class="op">(</span><span class="va">game</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">plays</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="st">"desc"</span>, <span class="st">"TimeSecsRem"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 2</span></span></span>
<span><span class="co">#&gt;   desc                        TimeSecsRem</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Jadon Redding 38 yd FG GOOD         241</span></span>
<span><span class="va">plays</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">cfb4th</span><span class="fu">::</span><span class="fu"><a href="../reference/add_4th_probs.html">add_4th_probs</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">cfb4th</span><span class="fu">::</span><span class="fu"><a href="../reference/make_table_data.html">make_table_data</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Computing probabilities for 1 plays. . .</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">choice</th>
<th align="right">choice_prob</th>
<th align="right">success_prob</th>
<th align="right">fail_wp</th>
<th align="right">success_wp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Field goal attempt</td>
<td align="right">7.5</td>
<td align="right">72.3</td>
<td align="right">1.8</td>
<td align="right">9.7</td>
</tr>
<tr class="even">
<td align="left">Go for it</td>
<td align="right">7.5</td>
<td align="right">29.0</td>
<td align="right">2.3</td>
<td align="right">20.2</td>
</tr>
<tr class="odd">
<td align="left">Punt</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://twitter.com/JaredDLee" class="external-link">Jared Lee</a>, <a href="https://twitter.com/benbbaldwin" class="external-link">Ben Baldwin</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
